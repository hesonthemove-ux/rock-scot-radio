<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Station - On Air Status</title>
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #1a1a1a; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        
        /* THE LOCKED LAYOUT */
        #station-container {
            width: 450px;
            background: #222;
            border: 3px solid #444;
            padding: 30px;
            text-align: center;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        #on-air-display {
            font-size: 1.8rem;
            min-height: 2.2rem;
            margin-bottom: 20px;
            color: #ffcc00; /* Rock gold color */
        }

        .presenter-live { color: #ff3333; font-weight: bold; text-transform: uppercase; }
        .automation-text { color: #aaa; font-style: italic; font-weight: normal; }

        hr { border: 0; border-top: 1px solid #444; margin: 20px 0; }

        /* FIXED PRICING SECTION */
        .pricing-table { width: 100%; font-size: 0.9rem; color: #888; }
        .price-value { color: #fff; font-weight: bold; font-size: 1.1rem; }
    </style>
</head>
<body>

<div id="station-container">
    <div id="on-air-display">Connecting to stream...</div>

    <hr>

    <table class="pricing-table">
        <tr>
            <td>Regional Airtime</td>
            <td>Multi-Regional Airtime</td>
        </tr>
        <tr>
            <td class="price-value">£199</td>
            <td class="price-value">£349</td>
        </tr>
    </table>
</div>

<script>
    // 1. YOUR ROCK SAYINGS
    const rockSayings = [
        "All killer, no filler",
        "Turn it up to eleven",
        "Maximum volume, minimum fuss",
        "Pure rock, no talk",
        "For those about to rock, we salute you",
        "The beat goes on",
        "Solid gold rock and roll",
        "Keep on rockin' in the free world",
        "Long live rock and roll"
    ];

    // 2. KEYWORDS TO DETECT AUTOMATION
    const autoKeywords = ["AutoDJ", "AI", "Automation", "Streamer", "Server", "Fallback", "None", "Station"];

    async function updateStationStatus() {
        const display = document.getElementById("on-air-display");
        
        try {
            // REPLACE 'YOUR_STREAM_URL' with your actual JSON status endpoint
            const response = await fetch('YOUR_STREAM_URL'); 
            const data = await response.json();
            
            // Extract title/presenter (adjust path based on your provider)
            let currentSource = data.icestats.source[0]?.title || data.icestats.source?.title || "";

            const isAutomated = autoKeywords.some(key => currentSource.toLowerCase().includes(key.toLowerCase()));

            if (isAutomated || !currentSource) {
                // AUTOMATION MODE
                const randomPhrase = rockSayings[Math.floor(Math.random() * rockSayings.length)];
                display.innerHTML = `<span class="automation-text">${randomPhrase}</span>`;
            } else {
                // HUMAN MODE (e.g., Russell)
                display.innerHTML = `ON AIR: <span class="presenter-live">${currentSource}</span>`;
            }
        } catch (err) {
            // FALLBACK IF STREAM IS DOWN
            display.innerHTML = `<span class="automation-text">Keep on rockin' in the free world</span>`;
        }
    }

    // Run immediately and then every 60 seconds
    updateStationStatus();
    setInterval(updateStationStatus, 60000);
</script>

</body>
</html>
